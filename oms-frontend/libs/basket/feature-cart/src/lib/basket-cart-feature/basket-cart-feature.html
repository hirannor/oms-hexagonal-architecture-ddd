<div class="basket-container">
  @if (loading$ | async) {
    <lib-loading-spinner></lib-loading-spinner>
  } @else if (isEmpty$ | async) {
    <div class="empty-basket">
      <h3>Your basket is empty ðŸ›’</h3>
      <p>Start shopping to add your first item.</p>
      <button
        pButton
        pButtonLabel="Browse Products"
        pButtonIcon="pi pi-box"
        routerLink="/products"
        class="p-button-outlined p-button-secondary"
      >Browse Products
      </button>
    </div>
  } @else {
    @if (basket$ | async; as basket) {
      @switch (basket.status) {
        @case ('ACTIVE') {
          <lib-basket-ui
            [basket]="basket"
            (increase)="onIncrease($event)"
            (decrease)="onDecrease($event)"
            (remove)="onRemove($event)"
            (checkout)="onCheckout()"
          ></lib-basket-ui>
        }
        @case ('CHECKED_OUT') {
          <lib-basket-ui-summary
            [basket]="basket"
            (confirmOrderClicked)="onConfirmOrder($event)"
          ></lib-basket-ui-summary>
        }
        @default {
          <lib-loading-spinner></lib-loading-spinner>
        }
      }
    } @else {
      <lib-loading-spinner></lib-loading-spinner>
    }
  }
</div>
