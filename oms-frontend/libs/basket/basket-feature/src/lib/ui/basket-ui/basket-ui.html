<div class="basket-container">
  @if (basket && basket.items.length > 0) {

  <p-table [value]="basket.items" class="basket-table">
    <ng-template pTemplate="header">
      <tr>
        <th>Product</th>
        <th>Description</th>
        <th class="text-center">Quantity</th>
        <th>Unit Price</th>
        <th>Total</th>
        <th></th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-item>
      <tr>
        <td class="product-name">{{ item.name }}</td>
        <td class="product-desc">{{ item.description }}</td>

        <td class="quantity-cell">
          <button
            pButton
            class="p-button-rounded p-button-text"
            (click)="decrease.emit(item)"
            pTooltip="Decrease quantity"
            tooltipPosition="top"
          >
            <span pButtonIcon class="pi pi-minus"></span>
          </button>

          <span class="quantity-value">{{ item.quantity }}</span>

          <button
            pButton
            class="p-button-rounded p-button-text"
            (click)="increase.emit(item)"
            pTooltip="Increase quantity"
            tooltipPosition="top"
          >
            <span pButtonIcon class="pi pi-plus"></span>
          </button>
        </td>

        <td>{{ item.price.amount }} {{ item.price.currency }}</td>
        <td>
          {{ (item.price.amount * item.quantity) | number: '1.2-2' }} {{
          item.price.currency }}
        </td>

        <td class="actions">
          <button
            pButton
            class="p-button-rounded p-button-danger p-button-text"
            (click)="remove.emit(item)"
            pTooltip="Remove item"
            tooltipPosition="top"
          >
            <span pButtonIcon class="pi pi-trash"></span>
          </button>
        </td>
      </tr>
    </ng-template>
  </p-table>

  <footer class="basket-footer">
    <div class="basket-summary">
      <h3>
        Total:
        <strong
          >{{ basket.totalPrice.amount }} {{ basket.totalPrice.currency
          }}</strong
        >
      </h3>
    </div>

    <div class="basket-actions">
      <button
        pButton
        class="p-button-secondary p-button-lg"
        routerLink="/products"
      >
        <span pButtonIcon class="pi pi-arrow-left"></span>
        <span pButtonLabel>Continue Shopping</span>
      </button>

      <button
        pButton
        class="p-button-success p-button-lg"
        (click)="checkout.emit()"
      >
        <span pButtonIcon class="pi pi-credit-card"></span>
        <span pButtonLabel>Proceed to Checkout</span>
      </button>
    </div>
  </footer>
  }
</div>
