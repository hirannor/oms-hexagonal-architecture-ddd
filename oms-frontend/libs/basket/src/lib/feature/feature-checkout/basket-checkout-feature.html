<div class="checkout-wrapper">
  @if (loading$ | async) {
    <lib-loading-spinner></lib-loading-spinner>
  } @else {
    @if (basket$ | async; as basket) {
      @switch (basket.status) {
        @case ('CHECKED_OUT') {
          <lib-basket-ui-summary
            [basket]="basket"
            (confirmOrderClicked)="onConfirmOrder($event)">
          </lib-basket-ui-summary>
        }
        @case ('ACTIVE') {
          <div class="pending-checkout">
            <h3>Processing checkout...</h3>
            <p>Please wait a moment while we finalize your order.</p>
            <lib-loading-spinner></lib-loading-spinner>
          </div>
        }
        @default {
          <lib-loading-spinner></lib-loading-spinner>
        }
      }
    } @else {
      <lib-loading-spinner></lib-loading-spinner>
    }
  }
</div>
